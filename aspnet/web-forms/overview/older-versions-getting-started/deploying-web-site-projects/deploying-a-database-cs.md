---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
title: 部署数据库 (C#) |Microsoft Docs
author: rick-anderson
description: 部署 ASP.NET web 应用程序需要从开发环境中获取的必要的文件和资源到生产环境。 为 da...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: ff537a10-9f1f-43fe-9bcb-3dda161ba8f5
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/deploying-a-database-cs
msc.type: authoredcontent
ms.openlocfilehash: fe85e583618cbab772c788f9a53509000aa415c5
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/03/2018
ms.locfileid: "37386531"
---
<a name="deploying-a-database-c"></a><span data-ttu-id="ec2dd-104">部署数据库 (C#)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-104">Deploying a Database (C#)</span></span>
====================
<span data-ttu-id="ec2dd-105">通过[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ec2dd-106">[下载代码](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip)或[下载 PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-106">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_07_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial07_DeployDB_cs.pdf)</span></span>

> <span data-ttu-id="ec2dd-107">部署 ASP.NET web 应用程序需要从开发环境中获取的必要的文件和资源到生产环境。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-107">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="ec2dd-108">对于数据驱动的 web 应用程序中，这包括数据库架构和数据。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-108">For data-driven web applications this includes the database schema and data.</span></span> <span data-ttu-id="ec2dd-109">本教程中探讨了成功部署到生产环境中开发环境的数据库所需的步骤一系列的第一个。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-109">This tutorial is the first in a series that explores the steps needed to successfully deploy the database from the development environment to production.</span></span>


## <a name="introduction"></a><span data-ttu-id="ec2dd-110">介绍</span><span class="sxs-lookup"><span data-stu-id="ec2dd-110">Introduction</span></span>

<span data-ttu-id="ec2dd-111">部署 ASP.NET web 应用程序需要从开发环境中获取的必要的文件和资源到生产环境。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-111">Deploying an ASP.NET web application entails getting the necessary files and resources from the development environment to the production environment.</span></span> <span data-ttu-id="ec2dd-112">在过去的过去六个教程还介绍了简单的书评 web 应用程序部署。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-112">Over the course of the past six tutorials we looked at deploying a simple Book Reviews web application.</span></span> <span data-ttu-id="ec2dd-113">此演示站点已包含的服务器端资源的 ASP.NET 页、 配置文件中，许多`Web.sitemap`文件和等的以及客户端的资源，如图像和 CSS 文件。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-113">This demo site was comprised of a number of server-side resources - ASP.NET pages, configuration files, a `Web.sitemap` file, and so forth - along with client-side resources, like images and CSS files.</span></span> <span data-ttu-id="ec2dd-114">但 web 应用程序的数据驱动的呢？</span><span class="sxs-lookup"><span data-stu-id="ec2dd-114">But what about data-driven web applications?</span></span> <span data-ttu-id="ec2dd-115">必须采取哪些额外步骤来部署 web 应用程序使用数据库？</span><span class="sxs-lookup"><span data-stu-id="ec2dd-115">What extra steps must be taken to deploy a web application that uses a database?</span></span>

<span data-ttu-id="ec2dd-116">通过下一步的多个教程中，我们将解决部署数据驱动的 web 应用程序所需的步骤。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-116">Over the next several tutorials we will address the steps needed to deploy a data-driven web application.</span></span> <span data-ttu-id="ec2dd-117">本教程首先会了解如何让数据库的架构和内容从开发环境到生产环境中，而后续的教程中探讨的所需的配置更改。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-117">This tutorial starts by examining how to get a database s schema and contents from the development environment to the production environment, while the subsequent tutorial looks at the needed configuration changes.</span></span> <span data-ttu-id="ec2dd-118">之后我们将探讨部署使用应用程序服务 （成员资格、 角色、 配置文件中，等） 的数据库的挑战。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-118">Following that we'll explore challenges of deploying a database that uses the Application Services (Membership, Roles, Profile, and so on).</span></span>

## <a name="examining-the-updated-book-reviews-web-application"></a><span data-ttu-id="ec2dd-119">检查更新的通讯簿评审 Web 应用程序</span><span class="sxs-lookup"><span data-stu-id="ec2dd-119">Examining the Updated Book Reviews Web Application</span></span>

<span data-ttu-id="ec2dd-120">为了演示部署数据驱动的 web 应用程序，我已更新为数据驱动型从简单的静态网站书评 web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-120">In order to demonstrate deploying a data-driven web application, I ve updated the Book Reviews web application from a simple, static website to a data-driven one.</span></span> <span data-ttu-id="ec2dd-121">因为在这之前，有两个版本的此教程的下载中的应用程序： 一个使用 Web 应用程序项目模型，另一个使用网站项目模型。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-121">As before, there are two versions of the application in this tutorial s download: one that uses the Web Application Project model and one that uses the Web Site Project model.</span></span>

<span data-ttu-id="ec2dd-122">更新的书评 web 应用程序使用[SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx)数据库，它存储在站点 s`App_Data`文件夹 (`~/App_Data/Reviews.mdf`)。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-122">The updated Book Reviews web application uses a [SQL Server 2008 Express Edition](https://www.microsoft.com/express/sql/default.aspx) database, which is stored in the site s `App_Data` folder (`~/App_Data/Reviews.mdf`).</span></span> <span data-ttu-id="ec2dd-123">如果必须在计算机上安装 SQL Server 2008 然后演示将会正确运行。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-123">If you have SQL Server 2008 installed on your computer then the demo should run without error.</span></span> <span data-ttu-id="ec2dd-124">如果有较旧版本的 SQL Server 可以安装免费的 SQL Server 2008 Express Edition，或者可以使用脚本可在本教程中 s 下载自行创建该数据库的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-124">If you have an older version of SQL Server you can either install the free SQL Server 2008 Express Edition or you can use the database scripts available in this tutorial s download to create the database yourself.</span></span>

<span data-ttu-id="ec2dd-125">`Reviews.mdf`数据库包含四个表：</span><span class="sxs-lookup"><span data-stu-id="ec2dd-125">The `Reviews.mdf` database contains four tables:</span></span>

- <span data-ttu-id="ec2dd-126">`Genres` -包括每个流派，如技术、 小说和业务的记录。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-126">`Genres` - includes a record for each genre, such as Technology, Fiction, and Business.</span></span>
- <span data-ttu-id="ec2dd-127">`Books` -包括每个评审，如列的记录`Title`， `GenreId`， `ReviewDate`，和`Review`，等等。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-127">`Books` - includes a record for each review, with columns like `Title`, `GenreId`, `ReviewDate`, and `Review`, among others.</span></span>
- <span data-ttu-id="ec2dd-128">`Authors` -包含有关已审阅书籍做出了贡献每位作者的信息。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-128">`Authors` - includes information about each author who has contributed to a reviewed book.</span></span>
- <span data-ttu-id="ec2dd-129">`BooksAuthors` -指定哪些作者已编写哪些丛书的多对多联接表。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-129">`BooksAuthors` - a many-to-many join table that specifies what authors have written what books.</span></span>
  

<span data-ttu-id="ec2dd-130">图 1 显示了以下四个表的 ER 关系图。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-130">Figure 1 shows an ER diagram of these four tables.</span></span>


<span data-ttu-id="ec2dd-131">[![通讯簿评审 Web 应用程序的数据库是包含的四个表](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-131">[![The Book Reviews Web Application s Database is Comprised of Four Tables](deploying-a-database-cs/_static/image2.jpg)](deploying-a-database-cs/_static/image1.jpg)</span></span> 

<span data-ttu-id="ec2dd-132">**图 1**: 通讯簿评审 Web 应用程序的数据库是包含的四个表 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-132">**Figure 1**: The Book Reviews Web Application s Database is Comprised of Four Tables ([Click to view full-size image](deploying-a-database-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="ec2dd-133">以前版本的书评网站必须单独每本书的 ASP.NET 页面。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-133">The previous version of the Book Reviews website had a separate ASP.NET page for each book.</span></span> <span data-ttu-id="ec2dd-134">例如，有了一个名为页`~/Tech/TYASP35.aspx`包含的审阅*教您自己 ASP.NET 3.5 24 小时内*。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-134">For example, there was a page named `~/Tech/TYASP35.aspx` that contained the review for *Teach Yourself ASP.NET 3.5 in 24 Hours*.</span></span> <span data-ttu-id="ec2dd-135">该网站的此新数据驱动版本具有存储在数据库和单个 ASP.NET 页面，Review.aspx?ID= 评论*bookId*，后者将显示指定的书籍的审阅。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-135">This new data-driven version of the website has the reviews stored in the database and a single ASP.NET page, Review.aspx?ID=*bookId*, which displays the review for the specified book.</span></span> <span data-ttu-id="ec2dd-136">同样，没有 Genre.aspx?ID=*genreId*页面列出了指定的类型中的已审阅的书籍。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-136">Likewise, there is a Genre.aspx?ID=*genreId* page that lists the reviewed books in the specified genre.</span></span>

<span data-ttu-id="ec2dd-137">图 2 和 3 个 show`Genre.aspx`和`Review.aspx`操作中的页。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-137">Figures 2 and 3 show the `Genre.aspx` and `Review.aspx` pages in action.</span></span> <span data-ttu-id="ec2dd-138">请注意每个页面在地址栏中的 URL。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-138">Note the URL in the Address bar for each page.</span></span> <span data-ttu-id="ec2dd-139">在图 2 it s Genre.aspx？ ID = 85d164ba 1123年 4 c 的 47-82a0-c8ec75de7e0e。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-139">In Figure 2 it s Genre.aspx?ID=85d164ba-1123-4c47-82a0-c8ec75de7e0e.</span></span> <span data-ttu-id="ec2dd-140">因为 85d164ba-1123-4c47-82a0-c8ec75de7e0e`GenreId`技术 genre、"技术回顾"页的标题读取和项目符号列表的值枚举属于此类型在站点上的这些评论。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-140">Because 85d164ba-1123-4c47-82a0-c8ec75de7e0e is the `GenreId` value for the Technology genre, the page s heading reads "Technology Reviews" and the bulleted list enumerates those reviews on the site that fall under this genre.</span></span>


<span data-ttu-id="ec2dd-141">[![技术流派页](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-141">[![The Technology Genre Page](deploying-a-database-cs/_static/image5.jpg)](deploying-a-database-cs/_static/image4.jpg)</span></span> 

<span data-ttu-id="ec2dd-142">**图 2**: 技术流派页 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-142">**Figure 2**: The Technology Genre Page ([Click to view full-size image](deploying-a-database-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="ec2dd-143">[![有关查看自学 ASP.NET 3.5 中 24 小时](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-143">[![The Review for Teach Yourself ASP.NET 3.5 in 24 Hours](deploying-a-database-cs/_static/image8.jpg)](deploying-a-database-cs/_static/image7.jpg)</span></span> 

<span data-ttu-id="ec2dd-144">**图 3**: 评审*教您自己 ASP.NET 3.5 24 小时内*([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-144">**Figure 3**: The Review for *Teach Yourself ASP.NET 3.5 in 24 Hours* ([Click to view full-size image](deploying-a-database-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="ec2dd-145">通讯簿评审 web 应用程序还包括管理部分，管理员可以添加、 编辑和删除流派，评审，和作者信息。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-145">The Book Reviews web application also includes an administration section where administrators can add, edit, and delete genres, reviews, and author information.</span></span> <span data-ttu-id="ec2dd-146">目前，任何访问者可以访问管理部分。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-146">Currently, any visitor can access the administration section.</span></span> <span data-ttu-id="ec2dd-147">在将来的教程中我们将添加对用户帐户的支持，并仅允许经过授权的用户到管理页。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-147">In a future tutorial we'll add support for user accounts and only permit authorized users into the administration pages.</span></span>

<span data-ttu-id="ec2dd-148">如果您下载书评应用程序请记住，其目的是演示如何部署数据驱动的应用程序。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-148">If you download the Book Reviews application please keep in mind that its purpose is to demonstrate deploying a data-driven application.</span></span> <span data-ttu-id="ec2dd-149">它不会出现就应用程序设计最佳实践。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-149">It does not exhibit best practices as far as application design.</span></span> <span data-ttu-id="ec2dd-150">例如，没有任何单独的数据访问层 (DAL);ASP.NET 页面直接与通过 SqlDataSource 控件或其代码隐藏类中的 ADO.NET 代码数据库进行通信。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-150">For example, there is no separate Data Access Layer (DAL); the ASP.NET pages communicate directly with the database through the SqlDataSource control or ADO.NET code in their code-behind classes.</span></span> <span data-ttu-id="ec2dd-151">有关创建数据驱动的应用程序使用分层体系结构的更深入信息，请参阅我[*使用的数据*教程](../../data-access/index.md)。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-151">For a more in-depth look at creating data-driven applications using a tiered architecture, refer to my [*Working with Data* tutorials](../../data-access/index.md).</span></span>

## <a name="databases-on-development-versus-production"></a><span data-ttu-id="ec2dd-152">在开发与生产数据库</span><span class="sxs-lookup"><span data-stu-id="ec2dd-152">Databases on Development Versus Production</span></span>

<span data-ttu-id="ec2dd-153">当您开始开发数据驱动的 web 应用程序时必须指定数据库连接字符串，提供有关如何连接到数据库的应用程序详细信息。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-153">When you start development on a data-driven web application you must specify a database connection string, which provides the application details on how to connect to the database.</span></span> <span data-ttu-id="ec2dd-154">此连接字符串指定其他内容、 数据库服务器、 数据库名称和安全信息。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-154">This connection string specifies, among other things, the database server, the database name, and security information.</span></span> <span data-ttu-id="ec2dd-155">大多数情况下，应用程序在开发期间使用的数据库是不同于数据库时使用它在生产环境中的 s。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-155">Most often, the database used by the application during development is different than the database used when it s in production.</span></span> <span data-ttu-id="ec2dd-156">有很多好处的适用于开发与生产环境使用不同的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-156">There are many benefits of using different databases for development versus production.</span></span> <span data-ttu-id="ec2dd-157">不要具有不同的数据库开发意味着您需要考虑如何意外修改或删除实时数据。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-157">Having a different database in development means you don t have to worry about accidentally modifying or deleting live data.</span></span> <span data-ttu-id="ec2dd-158">它还允许您将放入的虚拟测试数据或对数据模型进行重大更改，而无需担心如何在生产环境中应用程序的影响。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-158">It also lets you put in dummy test data or make breaking changes to the data model without having to worry about the effects on the application in production.</span></span> <span data-ttu-id="ec2dd-159">缺点不同的数据库开发和生产环境中是，当应用程序部署到数据库的架构数据库和相关的任何更改，或必须部署的数据。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-159">The downside of having a different database in the development and production environments is that when the application is deployed the database and any pertinent changes to the database s schema or data must also be deployed.</span></span>

<span data-ttu-id="ec2dd-160">在第一个部署前没有数据库，只有一个实例，该实例是在开发环境中。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-160">Prior to the first deployment, there is only one instance of the database, and that instance is in the development environment.</span></span> <span data-ttu-id="ec2dd-161">部署到生产环境的第一次应用程序时我们不仅必须复制必要的服务器端和客户端的文件，而且还将开发环境中的数据库复制到生产环境。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-161">When deploying the application to production for the first time we must not only copy up the necessary server-side and client-side files, but also copy the database from the development environment to the production environment.</span></span> <span data-ttu-id="ec2dd-162">这是在其中我们处在右，现在与书评 web 应用程序的数据库驻留在`App_Data`文件夹在我们的开发环境中但不是具有尚未被推送到生产环境。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-162">This is where we stand right now with the Book Reviews web application - the database resides in the `App_Data` folder in our development environment but has not yet been pushed up to the production environment.</span></span>

<span data-ttu-id="ec2dd-163">一旦部署应用程序有两个数据库的副本。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-163">Once the application has been deployed there are two copies of the database.</span></span> <span data-ttu-id="ec2dd-164">随着应用程序日趋成熟，可能会添加新功能，因而需要进行数据模型的更改 （如将新列添加到现有表，对现有列，添加新表进行更改和其他操作）。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-164">As the application matures, new features may be added, necessitating a change to the data model (such as adding new columns to existing tables, making changes to existing columns, adding new tables, and so on).</span></span> <span data-ttu-id="ec2dd-165">接下来的 web 应用程序部署，所做的更改应用于开发环境中的数据库中，由于上一个部署必须应用到生产数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-165">When the web application is next deployed, the changes applied to the database in the development environment since the last deployment must be applied to the production database.</span></span> <span data-ttu-id="ec2dd-166">在将来的教程中讨论了一些策略可用于管理此过程。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-166">Some strategies for managing this process are discussed in a future tutorial.</span></span> <span data-ttu-id="ec2dd-167">本教程重点介绍部署到生产环境中开发环境的整个数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-167">This tutorial focuses on deploying the entire database from the development environment to production.</span></span>

## <a name="deploying-the-database-to-the-production-environment"></a><span data-ttu-id="ec2dd-168">将数据库部署到生产环境</span><span class="sxs-lookup"><span data-stu-id="ec2dd-168">Deploying the Database to the Production Environment</span></span>

<span data-ttu-id="ec2dd-169">本教程的其余部分讨论如何部署到生产环境中开发环境的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-169">The remainder of this tutorial looks at how to deploy the database from the development environment to the production environment.</span></span> <span data-ttu-id="ec2dd-170">如果您按照沿您需要确保您的帐户和 web 宿主提供程序包括 Microsoft SQL Server 数据库支持。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-170">If you are following along you need to make sure that your account with your web host provider includes Microsoft SQL Server database support.</span></span> <span data-ttu-id="ec2dd-171">您还需要具有某些信息后，即数据库服务器名称、 数据库名称和用户名和密码用来连接到数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-171">You'll also need to have some information at hand, namely the database server name, the database name, and the username and password used to connect to the database.</span></span>

<span data-ttu-id="ec2dd-172">在本教程前面所述，书评网站的数据库是存储在 SQL Server 2008 Express Edition 数据库`App_Data`文件夹。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-172">As noted earlier in this tutorial, the Book Reviews website s database is a SQL Server 2008 Express Edition database stored in the `App_Data` folder.</span></span> <span data-ttu-id="ec2dd-173">它将一定会原因，部署此类数据库将十分简单，就像复制`App_Data`从开发环境到生产环境的文件夹。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-173">It would stand to reason that deploying such a database would be as simple as copying the `App_Data` folder from the development environment to the production environment.</span></span> <span data-ttu-id="ec2dd-174">但是，大多数 web 宿主提供程序不支持在托管数据库`App_Data`文件夹出于安全考虑。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-174">However, most web host providers do not support hosting databases in the `App_Data` folder because of security reasons.</span></span> <span data-ttu-id="ec2dd-175">相反，web 主机，其环境中的 SQL Server 数据库服务器上提供的帐户。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-175">Instead, web hosts provide an account on a SQL Server database server within their environment.</span></span> <span data-ttu-id="ec2dd-176">部署到生产环境中开发环境的数据库需要获取你在你的 web 主机的数据库服务器上注册的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-176">Deploying the database from your development environment to the production environment requires getting your database registered on your web host s database server.</span></span>

<span data-ttu-id="ec2dd-177">那么，如何得知您的数据库开发环境中的生产环境？</span><span class="sxs-lookup"><span data-stu-id="ec2dd-177">So how do you get your database from the development environment to the production environment?</span></span> <span data-ttu-id="ec2dd-178">有几种方法来实现此目的具体取决于您的 web 主机提供服务。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-178">There are a couple ways to accomplish this depending on what services your web host offers.</span></span> <span data-ttu-id="ec2dd-179">可以使用某些主机，如 DiscountASP.NET，FTP 或可以根据实际的数据库的备份`.mdf`文件到你的网站，然后，从控制面板中，将备份文件还原或附加`.mdf`到 SQL Server 数据库服务器的文件。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-179">With some hosts, such as DiscountASP.NET, you can FTP a backup of the database or the actual `.mdf` file to your website and then, from the Control Panel, restore the backup file or attach the `.mdf` file to the SQL Server database server.</span></span> <span data-ttu-id="ec2dd-180">使用此类工具将数据库部署非常简单，只复制`App_Data`到生产环境，然后将其附加通过控制面板的文件夹。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-180">With such tools deploying the database is as simple as copying the `App_Data` folder to the production environment and then attaching it via the Control Panel.</span></span> <span data-ttu-id="ec2dd-181">这可能是首次发布你的数据库的最简单且最快速方法。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-181">This is perhaps the easiest and quickest way to publish your database for the first time.</span></span>

<span data-ttu-id="ec2dd-182">另一种方法是使用数据库发布向导。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-182">Another approach is to use the Database Publishing Wizard.</span></span> <span data-ttu-id="ec2dd-183">数据库发布向导为 Windows 桌面应用程序将生成的 SQL 命令以在其表中创建的表、 存储的过程、 视图、 用户定义的函数等-将数据库的架构和数据 （可选）。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-183">The Database Publishing Wizard is a Windows desktop application that will generate the SQL commands to create your database s schema - the tables, stored procedures, views, user-defined functions, and so forth - and, optionally, the data in its tables.</span></span> <span data-ttu-id="ec2dd-184">你可以然后连接到 SQL Server Management Studio 通过在 web 主机提供程序的数据库服务器，然后执行此脚本以重复生产上的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-184">You can then connect to your web host provider s database server through SQL Server Management Studio and then execute this script to duplicate the database on production.</span></span> <span data-ttu-id="ec2dd-185">更好，如果您的 web 主机提供商支持 Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home)可以代表用户在数据库服务器上自动执行将数据库发布向导生成的脚本。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-185">Even better, if your web host provider supports Microsoft s [Database Publishing Services](http://www.codeplex.com/sqlhost/Wiki/View.aspx?title=Database%20Publishing%20Services&amp;referringTitle=Home) you can have the script generated by the Database Publishing Wizard automatically executed on the database server on your behalf.</span></span> <span data-ttu-id="ec2dd-186">由于数据库发布向导生成创建的数据库的架构和数据的脚本，因此将工作而不考虑 web 主机提供商是否提供了功能，如附加已上传`.mdf`文件。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-186">Because the Database Publishing Wizard generates a script that creates the database s schema and data, it will work regardless of whether your web host provider offers features like attaching an uploaded `.mdf` file.</span></span>

### <a name="generating-the-sql-commands-to-create-the-database-schema-and-data-using-the-database-publishing-wizard"></a><span data-ttu-id="ec2dd-187">生成 SQL 命令来创建数据库架构和数据使用数据库发布向导</span><span class="sxs-lookup"><span data-stu-id="ec2dd-187">Generating the SQL Commands to Create the Database Schema and Data Using the Database Publishing Wizard</span></span>

<span data-ttu-id="ec2dd-188">让我们来引导书评数据库部署到生产环境中使用数据库发布向导。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-188">Let s walk through using the Database Publishing Wizard to deploy the Book Reviews database to production.</span></span> <span data-ttu-id="ec2dd-189">如果您使用的 Visual Studio 2008 或更高版本，已安装数据库发布向导。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-189">If you are using Visual Studio 2008 or beyond, the Database Publishing Wizard is already installed.</span></span> <span data-ttu-id="ec2dd-190">如果您使用的 Visual Studio 2005，则您将需要先[下载并安装](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)向导。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-190">If you are using Visual Studio 2005 then you will need to first [download and install](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en) the wizard.</span></span>

<span data-ttu-id="ec2dd-191">打开 Visual Studio 并导航到`Reviews.mdf`数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-191">Open Visual Studio and navigate to the `Reviews.mdf` database.</span></span> <span data-ttu-id="ec2dd-192">如果使用 Visual Web Developer 中，转到数据库资源管理器;如果使用的 Visual Studio，，使用服务器资源管理器。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-192">If you are using Visual Web Developer, go to the Database Explorer; if you are using Visual Studio, use the Server Explorer.</span></span> <span data-ttu-id="ec2dd-193">图 4 显示了`Reviews.mdf`Visual Web Developer 中的数据库资源管理器中的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-193">Figure 4 shows the `Reviews.mdf` database in the Database Explorer in Visual Web Developer.</span></span> <span data-ttu-id="ec2dd-194">如图 4 所示，`Reviews.mdf`数据库组成的四个表、 三个存储的过程和用户定义函数。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-194">As Figure 4 shows, the `Reviews.mdf` database is composed of four tables, three stored procedures, and a user-defined function.</span></span>


<span data-ttu-id="ec2dd-195">[![在数据库资源管理器或服务器资源管理器中找到数据库](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-195">[![Locate the Database in the Database Explorer or Server Explorer](deploying-a-database-cs/_static/image11.jpg)](deploying-a-database-cs/_static/image10.jpg)</span></span> 

<span data-ttu-id="ec2dd-196">**图 4**： 在数据库资源管理器或服务器资源管理器中找到数据库 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-196">**Figure 4**: Locate the Database in the Database Explorer or Server Explorer ([Click to view full-size image](deploying-a-database-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="ec2dd-197">右键单击数据库名称，然后从上下文菜单中选择"发布到提供程序"选项。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-197">Right-click on the database name and choose the "Publish to provider" option from the context menu.</span></span> <span data-ttu-id="ec2dd-198">这将启动数据库发布向导 （请参见图 5）。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-198">This launches the Database Publishing Wizard (see Figure 5).</span></span> <span data-ttu-id="ec2dd-199">单击旁边提前过去的初始屏幕。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-199">Click Next to advance past the splash screen.</span></span>


<span data-ttu-id="ec2dd-200">[![数据库发布向导的初始屏幕](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-200">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image14.jpg)](deploying-a-database-cs/_static/image13.jpg)</span></span> 

<span data-ttu-id="ec2dd-201">**图 5**: 数据库发布向导初始屏幕 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-201">**Figure 5**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image15.jpg))</span></span>


<span data-ttu-id="ec2dd-202">在向导中的第二个屏幕列出了数据库发布向导可以访问数据库，并允许您选择是否要在所选数据库中的所有对象编写都脚本或选择编写都脚本的对象。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-202">The second screen in the wizard lists the databases accessible to the Database Publishing Wizard and lets you choose whether to script all objects in the selected database or to pick which objects to script.</span></span> <span data-ttu-id="ec2dd-203">选择相应的数据库并将"对象所选数据库中的所有脚本"选项处于选中状态。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-203">Select the appropriate database and leave the "Script all objects in the selected database" option checked.</span></span>

> [!NOTE]
> <span data-ttu-id="ec2dd-204">如果收到错误"在数据库中有任何对象*databaseName*的此向导可编写脚本的类型"时在图 6 中所示的屏幕中单击下一步，请确保您的数据库文件的路径不是很长。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-204">If you get the error "There are no objects in database *databaseName* of the types scriptable by this wizard" when clicking Next in the screen shown in Figure 6, make sure that the path to your database file is not overly long.</span></span> <span data-ttu-id="ec2dd-205">已发现，是否数据库文件的路径太长，可能会出现此错误。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-205">It has been discovered that this error can arise if the path to the database file is too long.</span></span>


<span data-ttu-id="ec2dd-206">[![数据库发布向导的初始屏幕](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-206">[![The Database Publishing Wizard Splash Screen](deploying-a-database-cs/_static/image17.jpg)](deploying-a-database-cs/_static/image16.jpg)</span></span> 

<span data-ttu-id="ec2dd-207">**图 6**: 数据库发布向导初始屏幕 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image18.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-207">**Figure 6**: The Database Publishing Wizard Splash Screen ([Click to view full-size image](deploying-a-database-cs/_static/image18.jpg))</span></span>


<span data-ttu-id="ec2dd-208">从下一个屏幕可以生成的脚本文件或者，如果你的 web 主机支持此功能，数据库将直接发布到 web 宿主提供程序的数据库服务器。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-208">From the next screen you can generate a script file or, if your web host supports it, publish the database directly to your web host provider s database server.</span></span> <span data-ttu-id="ec2dd-209">如图 7 所示，我遇到脚本写入到文件`C:\REVIEWS.MDF.sql`。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-209">As Figure 7 shows, I am having the script written to the file `C:\REVIEWS.MDF.sql`.</span></span>


<span data-ttu-id="ec2dd-210">[![编写脚本的数据库的文件或将其发布到你的 Web 宿主提供程序直接](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-210">[![Script the Database to a File or Publish it Directly to Your Web Host Provider](deploying-a-database-cs/_static/image20.jpg)](deploying-a-database-cs/_static/image19.jpg)</span></span> 

<span data-ttu-id="ec2dd-211">**图 7**： 编写脚本的数据库的文件或将其发布到你的 Web 宿主提供程序直接 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image21.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-211">**Figure 7**: Script the Database to a File or Publish it Directly to Your Web Host Provider ([Click to view full-size image](deploying-a-database-cs/_static/image21.jpg))</span></span>


<span data-ttu-id="ec2dd-212">后续屏幕将提示您输入的各种脚本编写选项。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-212">The subsequent screen prompts you for a variety of scripting options.</span></span> <span data-ttu-id="ec2dd-213">您可以指定脚本是否应包含 drop 语句删除这些现有对象。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-213">You can specify whether the script should include drop statements to remove these existing objects.</span></span> <span data-ttu-id="ec2dd-214">此值默认为 True，这样很好的第一次部署数据库时。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-214">This defaults to True, which is fine when deploying a database for the first time.</span></span> <span data-ttu-id="ec2dd-215">此外可以指定目标数据库是 SQL Server 2000、 SQL Server 2005 或 SQL Server 2008。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-215">You can also specify whether the target database is SQL Server 2000, SQL Server 2005, or SQL Server 2008.</span></span> <span data-ttu-id="ec2dd-216">最后，指示是否编写脚本的架构和数据，只需的数据或只为架构。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-216">Finally, you can indicate whether to script the schema and data, just the data, or just the schema.</span></span> <span data-ttu-id="ec2dd-217">架构是数据库对象、 表、 存储的过程、 视图和等等的集合。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-217">The schema is the collection of database objects, the tables, stored procedures, views, and so on.</span></span> <span data-ttu-id="ec2dd-218">数据是驻留在表中的信息。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-218">The data is the information residing in the tables.</span></span>

<span data-ttu-id="ec2dd-219">如图 8 所示，我遇到配置为删除现有数据库对象，该向导生成脚本的 SQL Server 2008 数据库，并将发布架构和数据。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-219">As Figure 8 illustrates, I ve got the wizard configured to drop existing database objects, to generate script for a SQL Server 2008 database, and to publish both the schema and data.</span></span>


<span data-ttu-id="ec2dd-220">[![指定发布选项](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-220">[![Specify the Publishing Options](deploying-a-database-cs/_static/image23.jpg)](deploying-a-database-cs/_static/image22.jpg)</span></span> 

<span data-ttu-id="ec2dd-221">**图 8**： 指定的发布选项 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image24.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-221">**Figure 8**: Specify the Publishing Options ([Click to view full-size image](deploying-a-database-cs/_static/image24.jpg))</span></span>


<span data-ttu-id="ec2dd-222">在最后两个屏幕总结了要执行，并显示的脚本状态的操作。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-222">The final two screens summarize the actions that are about to be taken and then display the status of the scripting.</span></span> <span data-ttu-id="ec2dd-223">运行向导的最终结果是我们有一个包含生产上创建数据库并使用相同的数据填充它与在开发上所需的 SQL 命令的脚本文件。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-223">The net result of running the wizard is that we have a script file that contains the SQL commands needed to create the database on production and populate it with the same data as on development.</span></span>

### <a name="executing-the-sql-commands-on-the-production-environment-database"></a><span data-ttu-id="ec2dd-224">在生产环境数据库上执行的 SQL 命令</span><span class="sxs-lookup"><span data-stu-id="ec2dd-224">Executing the SQL Commands On the Production Environment Database</span></span>

<span data-ttu-id="ec2dd-225">现在，我们已经包含 SQL 命令来创建数据库和其数据保留的脚本是在生产数据库上执行该脚本。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-225">Now that we have the script that contains the SQL commands to create the database and its data all that remains is to execute the script on the production database.</span></span> <span data-ttu-id="ec2dd-226">某些 web 主机提供商提供其控制面板，您可以在其中输入要在数据库上执行的 SQL 命令中的文本框。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-226">Some web host providers offer a textbox in their Control Panel where you can enter SQL commands to execute on your database.</span></span> <span data-ttu-id="ec2dd-227">如果您有一个非常大的脚本文件，则此选项可能不起作用 (`REVIEWS.MDF.sql`脚本文件为超过 425 KB 的大小，例如)。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-227">If you have a very large script file then this option might not work (the `REVIEWS.MDF.sql` script file is over 425 KB in size, for instance).</span></span>

<span data-ttu-id="ec2dd-228">更好的方法是直接连接到生产数据库服务器使用 SQL Server Management Studio (SSMS)。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-228">A better approach is to connect directly to the production database server using SQL Server Management Studio (SSMS).</span></span> <span data-ttu-id="ec2dd-229">如果有非 Express Edition 的 SQL Server 计算机上安装然后可能已经安装 SSMS。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-229">If you have a non-Express Edition of SQL Server installed on your computer then you likely already have SSMS installed.</span></span> <span data-ttu-id="ec2dd-230">否则，你可以[下载并安装](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)SQL Server Management Studio Express Edition 的免费副本。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-230">Otherwise, you can [download and install](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) a free copy of SQL Server Management Studio Express Edition.</span></span>

<span data-ttu-id="ec2dd-231">启动 SSMS 并连接到使用 web 主机提供商提供的信息在 web 主机的数据库服务器。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-231">Launch SSMS and connect to your web host s database server using the information provided by your web host provider.</span></span>


<span data-ttu-id="ec2dd-232">[![连接到 Web 宿主提供程序的数据库服务器](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-232">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image26.jpg)](deploying-a-database-cs/_static/image25.jpg)</span></span> 

<span data-ttu-id="ec2dd-233">**图 9**： 连接到你的 Web 主机提供商 s 数据库服务器 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image27.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-233">**Figure 9**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image27.jpg))</span></span>


<span data-ttu-id="ec2dd-234">展开数据库选项卡并找到你的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-234">Expand the Databases tab and locate your database.</span></span> <span data-ttu-id="ec2dd-235">单击工具栏左上角中的新建查询按钮，将粘贴数据库发布向导中，创建的脚本文件中的 SQL 命令中，单击执行按钮以在生产数据库服务器上运行这些命令。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-235">Click the New Query button in the upper left corner of the Toolbar, paste in the SQL commands from the script file created by the Database Publishing Wizard, and click the Execute button to run these commands on the production database server.</span></span> <span data-ttu-id="ec2dd-236">尤其是大型脚本文件时可能需要几分钟才能执行命令。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-236">If your script file is especially large it may take several minutes to execute the commands.</span></span>


<span data-ttu-id="ec2dd-237">[![连接到 Web 宿主提供程序的数据库服务器](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-237">[![Connect to Your Web Host Provider s Database Server](deploying-a-database-cs/_static/image29.jpg)](deploying-a-database-cs/_static/image28.jpg)</span></span> 

<span data-ttu-id="ec2dd-238">**图 10**： 连接到你的 Web 主机提供商 s 数据库服务器 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image30.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-238">**Figure 10**: Connect to Your Web Host Provider s Database Server ([Click to view full-size image](deploying-a-database-cs/_static/image30.jpg))</span></span>


<span data-ttu-id="ec2dd-239">该 s 都在这里就简单 ！</span><span class="sxs-lookup"><span data-stu-id="ec2dd-239">That s all there is to it!</span></span> <span data-ttu-id="ec2dd-240">现在，重复开发数据库到生产环境。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-240">At this point the development database has been duplicated to production.</span></span> <span data-ttu-id="ec2dd-241">如果刷新该数据库在 SSMS 中的应看到新的数据库对象。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-241">If you Refresh the database in SSMS you should see the new database objects.</span></span> <span data-ttu-id="ec2dd-242">图 11 显示了生产数据库的表、 存储的过程和用户定义的函数，镜像上开发数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-242">Figure 11 shows the production database s tables, stored procedures, and user-defined functions, which mirror those on the development database.</span></span> <span data-ttu-id="ec2dd-243">和生产数据库的表我们指示数据库发布向导来将数据发布，因为具有在该向导已执行的时间与开发数据库的表相同的数据。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-243">And because we instructed the Database Publishing Wizard to publish the data, the production database s tables have the same data as the development database s tables at the time the wizard was executed.</span></span> <span data-ttu-id="ec2dd-244">图 12 显示了中的数据`Books`生产数据库上的表。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-244">Figure 12 shows the data in the `Books` table on the production database.</span></span>


<span data-ttu-id="ec2dd-245">[![在生产数据库上复制了数据库对象](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-245">[![The Database Objects Have Been Duplicated on the Production Database](deploying-a-database-cs/_static/image32.jpg)](deploying-a-database-cs/_static/image31.jpg)</span></span> 

<span data-ttu-id="ec2dd-246">**图 11**: 数据库对象已复制了生产数据库上 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image33.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-246">**Figure 11**: The Database Objects Have Been Duplicated on the Production Database ([Click to view full-size image](deploying-a-database-cs/_static/image33.jpg))</span></span>


<span data-ttu-id="ec2dd-247">[![生产数据库包含与在开发数据库相同的数据](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-247">[![The Production Database Contains the Same Data as on the Development Database](deploying-a-database-cs/_static/image35.jpg)](deploying-a-database-cs/_static/image34.jpg)</span></span> 

<span data-ttu-id="ec2dd-248">**图 12**： 生产数据库上开发数据库包含相同的数据 ([单击以查看实际尺寸的图像](deploying-a-database-cs/_static/image36.jpg))</span><span class="sxs-lookup"><span data-stu-id="ec2dd-248">**Figure 12**: The Production Database Contains the Same Data as on the Development Database ([Click to view full-size image](deploying-a-database-cs/_static/image36.jpg))</span></span>


<span data-ttu-id="ec2dd-249">此时我们仅具有到生产环境部署开发数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-249">At this point we have only deployed the development database to production.</span></span> <span data-ttu-id="ec2dd-250">尚不支持已介绍了部署 web 应用程序本身或检查所需配置更改，让应用程序在生产使用生产数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-250">We have not yet looked at deploying the web application itself or examined what configuration changes are needed to have the application on production use the production database.</span></span> <span data-ttu-id="ec2dd-251">在下一教程中，我们将介绍这些问题 ！</span><span class="sxs-lookup"><span data-stu-id="ec2dd-251">We'll cover these issues in the next tutorial!</span></span>

## <a name="summary"></a><span data-ttu-id="ec2dd-252">总结</span><span class="sxs-lookup"><span data-stu-id="ec2dd-252">Summary</span></span>

<span data-ttu-id="ec2dd-253">部署数据驱动的 web 应用程序需要复制到生产环境的开发过程中使用的数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-253">Deploying a data-driven web application requires copying the database used during development to the production environment.</span></span> <span data-ttu-id="ec2dd-254">许多 web 主机提供商提供工具来简化部署数据库的过程。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-254">Many web host providers offer tools to simplify the process of deploying a database.</span></span> <span data-ttu-id="ec2dd-255">例如，使用 DiscountASP.NET 可以 FTP 数据库`.mdf`文件 （或备份），然后从控制面板将数据库附加到数据库服务器。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-255">For example, with DiscountASP.NET you can FTP your database `.mdf` file (or a backup) and then attach the database to the database server from the Control Panel.</span></span> <span data-ttu-id="ec2dd-256">无论何种功能正常运行的另一个选项 web 主机提供商产品/服务是 Microsoft 的数据库发布向导工具，它会生成一个脚本用于创建开发数据库的架构和数据的 SQL 命令。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-256">Another option that works regardless of what features your web host provider offers is Microsoft s Database Publishing Wizard tool, which generates a script of SQL commands to create the development database s schema and data.</span></span> <span data-ttu-id="ec2dd-257">生成此脚本后您可以在生产数据库上执行它。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-257">Once this script has been generated you can execute it on the production database.</span></span>

<span data-ttu-id="ec2dd-258">现在，书评 web 应用程序的数据库是生产上我们可以将部署应用程序。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-258">Now that the Book Reviews web application s database is on production we can deploy the application.</span></span> <span data-ttu-id="ec2dd-259">但是，web 应用程序的配置信息指定到的数据库的连接字符串，该连接字符串引用开发数据库。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-259">However, the web application s configuration information specifies the connection string to the database, and that connection string references the development database.</span></span> <span data-ttu-id="ec2dd-260">我们需要更新此连接字符串信息时在将站点部署到生产环境。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-260">We need to update this connection string information when deploying the site to production.</span></span> <span data-ttu-id="ec2dd-261">下一教程探讨这些配置差异，并逐步介绍数据驱动的书评站点发布到生产环境所需的步骤。</span><span class="sxs-lookup"><span data-stu-id="ec2dd-261">The next tutorial looks at these configuration differences and walks through the steps needed to publish the data-driven Book Reviews site to production.</span></span>

<span data-ttu-id="ec2dd-262">快乐编程 ！</span><span class="sxs-lookup"><span data-stu-id="ec2dd-262">Happy Programming!</span></span>

#### <a name="further-reading"></a><span data-ttu-id="ec2dd-263">其他阅读材料</span><span class="sxs-lookup"><span data-stu-id="ec2dd-263">Further Reading</span></span>

<span data-ttu-id="ec2dd-264">在本教程中讨论的主题的详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="ec2dd-264">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ec2dd-265">下载 Microsoft SQL Server 数据库发布向导 1.1</span><span class="sxs-lookup"><span data-stu-id="ec2dd-265">Download the Microsoft SQL Server Database Publishing Wizard 1.1</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en)
- [<span data-ttu-id="ec2dd-266">下载 Microsoft SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="ec2dd-266">Download the Microsoft SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)

> [!div class="step-by-step"]
> <span data-ttu-id="ec2dd-267">[上一页](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
> [下一页](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ec2dd-267">[Previous](core-differences-between-iis-and-the-asp-net-development-server-cs.md)
[Next](configuring-the-production-web-application-to-use-the-production-database-cs.md)</span></span>
