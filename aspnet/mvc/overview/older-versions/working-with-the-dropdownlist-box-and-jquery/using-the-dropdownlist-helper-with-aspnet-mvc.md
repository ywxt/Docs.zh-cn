---
uid: mvc/overview/older-versions/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc
title: 使用 ASP.NET MVC 使用 DropDownList 帮助程序 |Microsoft Docs
author: Rick-Anderson
description: ''
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/12/2012
ms.topic: article
ms.assetid: 53767e05-c8ab-42e1-a94b-22d906195200
ms.technology: dotnet-mvc
msc.legacyurl: /mvc/overview/older-versions/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc
msc.type: authoredcontent
ms.openlocfilehash: 6c55f37fc74c2aa1c9867abd8c281c88ee36fb92
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/03/2018
ms.locfileid: "37365745"
---
<a name="using-the-dropdownlist-helper-with-aspnet-mvc"></a><span data-ttu-id="f4f29-102">使用 ASP.NET MVC 使用 DropDownList 帮助程序</span><span class="sxs-lookup"><span data-stu-id="f4f29-102">Using the DropDownList Helper with ASP.NET MVC</span></span>
====================
<span data-ttu-id="f4f29-103">通过[Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="f4f29-103">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

<span data-ttu-id="f4f29-104">本教程将教您使用的基础知识[DropDownList](https://msdn.microsoft.com/library/dd492948.aspx)帮助器和[ListBox](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.listbox.aspx)中的 ASP.NET MVC Web 应用程序的帮助程序。</span><span class="sxs-lookup"><span data-stu-id="f4f29-104">This tutorial will teach you the basics of working with the [DropDownList](https://msdn.microsoft.com/library/dd492948.aspx) helper and the [ListBox](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.listbox.aspx) helper in an ASP.NET MVC Web application.</span></span> <span data-ttu-id="f4f29-105">可以使用 Microsoft Visual Web Developer 2010 Express Service Pack 1，这是 Microsoft Visual Studio，若要遵循本教程的免费版本。</span><span class="sxs-lookup"><span data-stu-id="f4f29-105">You can use Microsoft Visual Web Developer 2010 Express Service Pack 1, which is a free version of Microsoft Visual Studio to follow the tutorial.</span></span> <span data-ttu-id="f4f29-106">在开始之前，请确保已安装以下列出的先决条件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-106">Before you start, make sure you've installed the prerequisites listed below.</span></span> <span data-ttu-id="f4f29-107">可以通过单击以下链接安装所有这些： [Web 平台安装程序](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-107">You can install all of them by clicking the following link: [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span></span> <span data-ttu-id="f4f29-108">或者，可以单独安装系统必备组件，使用以下链接：</span><span class="sxs-lookup"><span data-stu-id="f4f29-108">Alternatively, you can individually install the prerequisites using the following links:</span></span>

- <span data-ttu-id="f4f29-109">[Visual Studio Web Developer Express SP1 必备组件](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack) <a id="post"></a></span><span class="sxs-lookup"><span data-stu-id="f4f29-109">[Visual Studio Web Developer Express SP1 prerequisites](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack) <a id="post"></a></span></span>
- [<span data-ttu-id="f4f29-110">ASP.NET MVC 3 工具更新</span><span class="sxs-lookup"><span data-stu-id="f4f29-110">ASP.NET MVC 3 Tools Update</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
- <span data-ttu-id="f4f29-111">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)（运行时和工具支持）</span><span class="sxs-lookup"><span data-stu-id="f4f29-111">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(runtime + tools support)</span></span>

<span data-ttu-id="f4f29-112">如果您使用 Visual Studio 2010 而不 Visual Web Developer 2010，通过单击以下链接安装必备组件： [Visual Studio 2010 必备软件](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-112">If you're using Visual Studio 2010 instead of Visual Web Developer 2010, install the prerequisites by clicking the following link: [Visual Studio 2010 prerequisites](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span></span> <span data-ttu-id="f4f29-113">本教程假定你已完成[ASP.NET MVC 简介](../getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md)教程或[ASP.NET MVC Music 商店](../mvc-music-store/mvc-music-store-part-1.md)教程或您熟悉 ASP.NET MVC 开发。</span><span class="sxs-lookup"><span data-stu-id="f4f29-113">This tutorial assumes you have completed the [Intro to ASP.NET MVC](../getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3.md) tutorial or the[ASP.NET MVC Music Store](../mvc-music-store/mvc-music-store-part-1.md) tutorial or you are familiar with ASP.NET MVC development.</span></span> <span data-ttu-id="f4f29-114">本教程开头从修改后的项目[ASP.NET MVC Music 商店](../mvc-music-store/mvc-music-store-part-1.md)教程。</span><span class="sxs-lookup"><span data-stu-id="f4f29-114">This tutorial starts with a modified project from the [ASP.NET MVC Music Store](../mvc-music-store/mvc-music-store-part-1.md) tutorial.</span></span> <span data-ttu-id="f4f29-115">您可以下载初学者项目使用以下链接[下载 C# 版本](https://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=aspnetmvcsamples&amp;DownloadId=15829)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-115">You can download the starter project with the following link [Download the C# version](https://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=aspnetmvcsamples&amp;DownloadId=15829).</span></span>

<span data-ttu-id="f4f29-116">具有已完成本教程的 C# 源代码的 Visual Web Developer 项目是可随附于本主题。</span><span class="sxs-lookup"><span data-stu-id="f4f29-116">A Visual Web Developer project with the completed tutorial C# source code is available to accompany this topic.</span></span> <span data-ttu-id="f4f29-117">[下载](https://code.msdn.microsoft.com/Using-the-DropDownList-67f9367d)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-117">[Download](https://code.msdn.microsoft.com/Using-the-DropDownList-67f9367d).</span></span>

### <a name="what-youll-build"></a><span data-ttu-id="f4f29-118">你将生成</span><span class="sxs-lookup"><span data-stu-id="f4f29-118">What You'll Build</span></span>

<span data-ttu-id="f4f29-119">您将创建的操作方法和视图，供[DropDownList](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.dropdownlist.aspx)帮助程序选择类别。</span><span class="sxs-lookup"><span data-stu-id="f4f29-119">You'll create action methods and views that use the [DropDownList](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.dropdownlist.aspx) helper to select a category.</span></span> <span data-ttu-id="f4f29-120">你还将使用**jQuery**添加一个新类别 （如流派或艺术家） 需要时可以使用插入类别对话框。</span><span class="sxs-lookup"><span data-stu-id="f4f29-120">You will also use **jQuery** to add an insert category dialog that can be used when a new category (such as genre or artist) is needed.</span></span> <span data-ttu-id="f4f29-121">下面是显示的链接可添加的新流派，并添加新的艺术家的创建视图的屏幕截图。</span><span class="sxs-lookup"><span data-stu-id="f4f29-121">Below is a screenshot of the Create view showing links to add a new genre and add a new artist.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image1.png)

### <a name="skills-youll-learn"></a><span data-ttu-id="f4f29-122">你将学习的技能</span><span class="sxs-lookup"><span data-stu-id="f4f29-122">Skills You'll Learn</span></span>

<span data-ttu-id="f4f29-123">下面是你将了解：</span><span class="sxs-lookup"><span data-stu-id="f4f29-123">Here's what you'll learn:</span></span>

- <span data-ttu-id="f4f29-124">如何使用[DropDownList](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.dropdownlist.aspx)帮助器来选择类别数据。</span><span class="sxs-lookup"><span data-stu-id="f4f29-124">How to use the [DropDownList](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.dropdownlist.aspx) helper to select category data.</span></span>
- <span data-ttu-id="f4f29-125">How to add **jQuery**对话框以添加新类别。</span><span class="sxs-lookup"><span data-stu-id="f4f29-125">How to add a **jQuery** dialog to add new categories.</span></span>

### <a name="getting-started"></a><span data-ttu-id="f4f29-126">入门</span><span class="sxs-lookup"><span data-stu-id="f4f29-126">Getting Started</span></span>

<span data-ttu-id="f4f29-127">首先，下载与下面的链接，初学者项目[下载](https://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=aspnetmvcsamples&amp;DownloadId=15829)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-127">Start by downloading the starter project with the following link, [Download](https://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=aspnetmvcsamples&amp;DownloadId=15829).</span></span> <span data-ttu-id="f4f29-128">在 Windows 资源管理器中，右键单击*DDL\_Starter.zip*文件，并选择属性。</span><span class="sxs-lookup"><span data-stu-id="f4f29-128">In Windows Explorer, right click on the *DDL\_Starter.zip* file and select properties.</span></span> <span data-ttu-id="f4f29-129">在中**DDL\_Starter.zip 属性**对话框中，选择解除阻止。</span><span class="sxs-lookup"><span data-stu-id="f4f29-129">In the **DDL\_Starter.zip Properties** dialog box, select Unblock.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image2.png)

<span data-ttu-id="f4f29-130">右键单击 DDL\_Starter.zip 文件，然后选择**提取所有**来解压缩该文件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-130">Right click the DDL\_Starter.zip file and select **Extract All** to unzip the file.</span></span> <span data-ttu-id="f4f29-131">打开*StartMusicStore.sln* Visual Web Developer 2010 速成版 （"Visual Web 开发人员"或简称"VWD"） 或 Visual Studio 2010 的文件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-131">Open the *StartMusicStore.sln* file with Visual Web Developer 2010 Express ("Visual Web Developer" or "VWD" for short) or Visual Studio 2010.</span></span>

<span data-ttu-id="f4f29-132">按 CTRL + f5 键以运行该应用程序，然后单击**测试**链接。</span><span class="sxs-lookup"><span data-stu-id="f4f29-132">Press CTRL+F5 to run the application and click the **Test** link.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image3.png)

<span data-ttu-id="f4f29-133">选择**选择电影类别 （简单）** 链接。</span><span class="sxs-lookup"><span data-stu-id="f4f29-133">Select the **Select Movie Category (Simple)** link.</span></span> <span data-ttu-id="f4f29-134">显示影片类型选择列表，与喜剧所选的值。</span><span class="sxs-lookup"><span data-stu-id="f4f29-134">A Movie Type Select list is displayed, with Comedy the selected value.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image4.png)

<span data-ttu-id="f4f29-135">右键单击浏览器并选择查看源中。</span><span class="sxs-lookup"><span data-stu-id="f4f29-135">Right click in the browser and select view source.</span></span> <span data-ttu-id="f4f29-136">显示该页面的 HTML。</span><span class="sxs-lookup"><span data-stu-id="f4f29-136">The HTML for the page is displayed.</span></span> <span data-ttu-id="f4f29-137">下面的代码显示的 HTML select 元素。</span><span class="sxs-lookup"><span data-stu-id="f4f29-137">The code below shows the HTML for the select element.</span></span>

[!code-html[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample1.html)]

<span data-ttu-id="f4f29-138">您可以看到每个项的选择列表中具有值 （0 表示操作、 剧本的 1、 2 表示喜剧和科幻小说的 3），并且显示名称 （操作、 戏曲、 喜剧和科幻小说）。</span><span class="sxs-lookup"><span data-stu-id="f4f29-138">You can see that each item in the select list has a value (0 for Action, 1 for Drama, 2 for Comedy and 3 for Science Fiction) and a display name (Action, Drama, Comedy and Science Fiction).</span></span> <span data-ttu-id="f4f29-139">上面的代码是标准 HTML 选择列表。</span><span class="sxs-lookup"><span data-stu-id="f4f29-139">The code above is standard HTML for a select list.</span></span>

<span data-ttu-id="f4f29-140">将选择列表更改为 Drama 和命中**提交**按钮。</span><span class="sxs-lookup"><span data-stu-id="f4f29-140">Change the select list to Drama and hit the **Submit** button.</span></span> <span data-ttu-id="f4f29-141">在浏览器中的 URL 是`http://localhost:2468/Home/CategoryChosen?MovieType=1`和页将显示**你选择： 1**。</span><span class="sxs-lookup"><span data-stu-id="f4f29-141">The URL in the browser is `http://localhost:2468/Home/CategoryChosen?MovieType=1` and the page displays **You Selected: 1**.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image5.png)

<span data-ttu-id="f4f29-142">打开*Controllers\HomeController.cs*文件并检查`SelectCategory`方法。</span><span class="sxs-lookup"><span data-stu-id="f4f29-142">Open the *Controllers\HomeController.cs* file and examine the `SelectCategory` method.</span></span>

[!code-csharp[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample2.cs)]

<span data-ttu-id="f4f29-143">[DropDownList](https://msdn.microsoft.com/library/dd492738.aspx)帮助器用于创建 HTML 选择列表需要**IEnumerable&lt;SelectListItem &gt;** ，显式或隐式。</span><span class="sxs-lookup"><span data-stu-id="f4f29-143">The [DropDownList](https://msdn.microsoft.com/library/dd492738.aspx) helper used to create an HTML select list requires a **IEnumerable&lt;SelectListItem &gt;**, either explicitly or implicitly.</span></span> <span data-ttu-id="f4f29-144">也就是说，您可以将传递**IEnumerable&lt;SelectListItem &gt;** 显式设[DropDownList](https://msdn.microsoft.com/library/dd492738.aspx)帮助程序也可以添加**IEnumerable&lt;SelectListItem &gt;** 到[ViewBag](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx)使用相同的名称**SelectListItem**为模型属性。</span><span class="sxs-lookup"><span data-stu-id="f4f29-144">That is, you can pass the **IEnumerable&lt;SelectListItem &gt;** explicitly to the [DropDownList](https://msdn.microsoft.com/library/dd492738.aspx) helper or you can add the **IEnumerable&lt;SelectListItem &gt;** to the [ViewBag](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) using the same name for the **SelectListItem** as the model property.</span></span> <span data-ttu-id="f4f29-145">传入**SelectListItem**本教程的下一部分中介绍了隐式和显式。</span><span class="sxs-lookup"><span data-stu-id="f4f29-145">Passing in the **SelectListItem** implicitly and explicitly is covered in the next part of the tutorial.</span></span> <span data-ttu-id="f4f29-146">上面的代码显示了最简单的可能方法创建**IEnumerable&lt;SelectListItem &gt;** 并使用文本和值填充它。</span><span class="sxs-lookup"><span data-stu-id="f4f29-146">The code above shows the simplest possible way to create an **IEnumerable&lt;SelectListItem &gt;** and populate it with text and values.</span></span> <span data-ttu-id="f4f29-147">请注意`Comedy` [SelectListItem](https://msdn.microsoft.com/library/system.web.mvc.selectlistitem.aspx)具有[选定](https://msdn.microsoft.com/library/system.web.mvc.selectlistitem.selected.aspx)属性设置为**true;** 这将导致呈现选择列表，以显示**喜剧**为列表中选定的项。</span><span class="sxs-lookup"><span data-stu-id="f4f29-147">Note the `Comedy`[SelectListItem](https://msdn.microsoft.com/library/system.web.mvc.selectlistitem.aspx) has the [Selected](https://msdn.microsoft.com/library/system.web.mvc.selectlistitem.selected.aspx) property set to **true;** this will cause the rendered select list to show **Comedy** as the selected item in the list.</span></span>

<span data-ttu-id="f4f29-148">**IEnumerable&lt;SelectListItem &gt;** 创建更高版本将添加到[ViewBag](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) MovieType 同名。</span><span class="sxs-lookup"><span data-stu-id="f4f29-148">The **IEnumerable&lt;SelectListItem &gt;** created above is added to the [ViewBag](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) with the name MovieType.</span></span> <span data-ttu-id="f4f29-149">这是我们会将传递给**IEnumerable&lt;SelectListItem &gt;** 隐式为[DropDownList](https://msdn.microsoft.com/library/dd492738.aspx)如下所示的帮助器。</span><span class="sxs-lookup"><span data-stu-id="f4f29-149">This is how we pass the **IEnumerable&lt;SelectListItem &gt;** implicitly to the [DropDownList](https://msdn.microsoft.com/library/dd492738.aspx) helper shown below.</span></span>

<span data-ttu-id="f4f29-150">打开*Views\Home\SelectCategory.cshtml*文件，并检查的标记。</span><span class="sxs-lookup"><span data-stu-id="f4f29-150">Open the *Views\Home\SelectCategory.cshtml* file and examine the markup.</span></span>

[!code-cshtml[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample3.cshtml)]

<span data-ttu-id="f4f29-151">在第三个行中，我们将设置布局为 Views/Shared/\_简单\_Layout.cshtml，这是标准布局文件的简化的版本。</span><span class="sxs-lookup"><span data-stu-id="f4f29-151">On the third line, we set the layout to Views/Shared/\_Simple\_Layout.cshtml, which is a simplified version of the standard layout file.</span></span> <span data-ttu-id="f4f29-152">我们这样做可以使显示器保持打开，并呈现简单的 HTML。</span><span class="sxs-lookup"><span data-stu-id="f4f29-152">We do this to keep the display and rendered HTML simple.</span></span>

<span data-ttu-id="f4f29-153">在此示例中我们不更改状态的应用程序，因此我们将数据通过提交**HTTP GET**，而非**HTTP POST**。</span><span class="sxs-lookup"><span data-stu-id="f4f29-153">In this sample we are not changing the state of the application, so we will submit the data using an **HTTP GET**, not **HTTP POST**.</span></span> <span data-ttu-id="f4f29-154">请参阅 W3C 部分[用于选择 HTTP GET 或 POST 的快速清单](http://www.w3.org/2001/tag/doc/whenToUseGet.html#checklist)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-154">See the W3C section [Quick Checklist for Choosing HTTP GET or POST](http://www.w3.org/2001/tag/doc/whenToUseGet.html#checklist).</span></span> <span data-ttu-id="f4f29-155">由于我们不会更改应用程序并发布窗体，因此我们使用[Html.BeginForm](https://msdn.microsoft.com/library/dd460344.aspx)重载，可用于指定操作方法、 控制器和窗体方法 (**HTTP POST**或**HTTP GET**)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-155">Because we are not changing the application and posting the form, we use the [Html.BeginForm](https://msdn.microsoft.com/library/dd460344.aspx) overload that allows us to specify the action method, controller and form method (**HTTP POST** or **HTTP GET**).</span></span> <span data-ttu-id="f4f29-156">视图中所包含通常[Html.BeginForm](https://msdn.microsoft.com/library/dd505244.aspx)不带参数的重载。</span><span class="sxs-lookup"><span data-stu-id="f4f29-156">Typically views contain the [Html.BeginForm](https://msdn.microsoft.com/library/dd505244.aspx) overload that takes no parameters.</span></span> <span data-ttu-id="f4f29-157">无参数版本默认为发布到相同的操作方法和控制器的 POST 版本窗体数据。</span><span class="sxs-lookup"><span data-stu-id="f4f29-157">The no parameter version defaults to posting the form data to the POST version of the same action method and controller.</span></span>

<span data-ttu-id="f4f29-158">下面的行</span><span class="sxs-lookup"><span data-stu-id="f4f29-158">The following line</span></span>

[!code-cshtml[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample4.cshtml)]

<span data-ttu-id="f4f29-159">将传递到一个字符串参数**DropDownList**帮助器。</span><span class="sxs-lookup"><span data-stu-id="f4f29-159">passes a string argument to the **DropDownList** helper.</span></span> <span data-ttu-id="f4f29-160">此字符串中，在本例中为"MovieType"执行两项操作：</span><span class="sxs-lookup"><span data-stu-id="f4f29-160">This string, "MovieType" in our example, does two things:</span></span>

- <span data-ttu-id="f4f29-161">它提供的键**DropDownList**帮助器以查找**IEnumerable&lt;SelectListItem &gt;** 中**ViewBag**。</span><span class="sxs-lookup"><span data-stu-id="f4f29-161">It provides the key for the **DropDownList** helper to find a **IEnumerable&lt;SelectListItem &gt;** in the **ViewBag**.</span></span>
- <span data-ttu-id="f4f29-162">它是数据绑定到 MovieType 窗体元素。</span><span class="sxs-lookup"><span data-stu-id="f4f29-162">It is data-bound to the MovieType form element.</span></span> <span data-ttu-id="f4f29-163">如果提交方法**HTTP GET**，`MovieType`将是一个查询字符串。</span><span class="sxs-lookup"><span data-stu-id="f4f29-163">If the submit method is **HTTP GET**, `MovieType` will be a query string.</span></span> <span data-ttu-id="f4f29-164">如果提交方法**HTTP POST**，`MovieType`将添加消息正文中。</span><span class="sxs-lookup"><span data-stu-id="f4f29-164">If the submit method is **HTTP POST**, `MovieType` will be added in the message body.</span></span> <span data-ttu-id="f4f29-165">下图显示了查询字符串，值为 1。</span><span class="sxs-lookup"><span data-stu-id="f4f29-165">The following image shows the query string with the value of 1.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image6.png)

<span data-ttu-id="f4f29-166">下面的代码演示`CategoryChosen`窗体提交到的方法。</span><span class="sxs-lookup"><span data-stu-id="f4f29-166">The following code shows the `CategoryChosen` method the form was submitted to.</span></span>

[!code-csharp[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample5.cs)]

<span data-ttu-id="f4f29-167">导航回到测试页并选择**HTML SelectList**链接。</span><span class="sxs-lookup"><span data-stu-id="f4f29-167">Navigate back to the test page and select the **HTML SelectList** link.</span></span> <span data-ttu-id="f4f29-168">HTML 页呈现类似于简单的 ASP.NET MVC 测试页选择元素。</span><span class="sxs-lookup"><span data-stu-id="f4f29-168">The HTML page renders a select element similar to the simple ASP.NET MVC test page.</span></span> <span data-ttu-id="f4f29-169">右键单击浏览器窗口，然后选择**查看源**。</span><span class="sxs-lookup"><span data-stu-id="f4f29-169">Right click the browser window and select **view source**.</span></span> <span data-ttu-id="f4f29-170">选择列表的 HTML 标记是实质上是相同的。</span><span class="sxs-lookup"><span data-stu-id="f4f29-170">The HTML markup for the select list is essentially identical.</span></span> <span data-ttu-id="f4f29-171">测试 HTML 页上，其工作原理类似的 ASP.NET MVC 操作方法和视图之前进行测试。</span><span class="sxs-lookup"><span data-stu-id="f4f29-171">Test the HTML page, it works like the ASP.NET MVC action method and view we previously tested.</span></span>

### <a name="improving-the-movie-select-list-with-enums"></a><span data-ttu-id="f4f29-172">改进与枚举的电影选择列表</span><span class="sxs-lookup"><span data-stu-id="f4f29-172">Improving the Movie Select List with Enums</span></span>

<span data-ttu-id="f4f29-173">如果你的应用程序中的类别固定的并且将不会更改，您可以充分利用枚举以使代码更可靠且易于扩展。</span><span class="sxs-lookup"><span data-stu-id="f4f29-173">If the categories in your application are fixed and will not change, you can take advantage of enums to make your code more robust and simpler to extend.</span></span> <span data-ttu-id="f4f29-174">当添加新类别时，生成正确的类别值。</span><span class="sxs-lookup"><span data-stu-id="f4f29-174">When you add a new category, the correct category value is generated.</span></span> <span data-ttu-id="f4f29-175">避免了复制和粘贴错误，当您添加新类别，但忘记更新的类别值。</span><span class="sxs-lookup"><span data-stu-id="f4f29-175">The avoids copy and paste errors when you add a new category but forget to update the category value.</span></span>

<span data-ttu-id="f4f29-176">打开*Controllers\HomeController.cs*文件并检查以下代码：</span><span class="sxs-lookup"><span data-stu-id="f4f29-176">Open the *Controllers\HomeController.cs* file and examine the following code:</span></span>

[!code-csharp[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample6.cs)]

<span data-ttu-id="f4f29-177">[Enum](https://msdn.microsoft.com/library/sbbt4032(VS.80).aspx) `eMovieCategories`捕获的四个电影类型。</span><span class="sxs-lookup"><span data-stu-id="f4f29-177">The [enum](https://msdn.microsoft.com/library/sbbt4032(VS.80).aspx) `eMovieCategories` captures the four movie types.</span></span> <span data-ttu-id="f4f29-178">`SetViewBagMovieType`方法创建**IEnumerable&lt;SelectListItem &gt;** 从`eMovieCategories`**枚举**，并设置`Selected`从属性`selectedMovie`参数。</span><span class="sxs-lookup"><span data-stu-id="f4f29-178">The `SetViewBagMovieType` method creates the **IEnumerable&lt;SelectListItem &gt;** from the `eMovieCategories`**enum**, and sets the `Selected` property from the `selectedMovie` parameter.</span></span> <span data-ttu-id="f4f29-179">`SelectCategoryEnum`操作方法使用同一个视图作为`SelectCategory`操作方法。</span><span class="sxs-lookup"><span data-stu-id="f4f29-179">The `SelectCategoryEnum` action method uses the same view as the `SelectCategory` action method.</span></span>

<span data-ttu-id="f4f29-180">导航到测试页并单击`Select Movie Category (Enum)`链接。</span><span class="sxs-lookup"><span data-stu-id="f4f29-180">Navigate to the Test page and click on the `Select Movie Category (Enum)` link.</span></span> <span data-ttu-id="f4f29-181">这次，而不是所显示的值 （数字），将显示一个字符串，表示枚举。</span><span class="sxs-lookup"><span data-stu-id="f4f29-181">This time, instead of a value (number) being displayed, a string representing the enum is displayed.</span></span>

### <a name="posting-enum-values"></a><span data-ttu-id="f4f29-182">发布的枚举值</span><span class="sxs-lookup"><span data-stu-id="f4f29-182">Posting Enum Values</span></span>

<span data-ttu-id="f4f29-183">HTML 窗体通常用于将数据发送到服务器。</span><span class="sxs-lookup"><span data-stu-id="f4f29-183">HTML Forms are typically used to post data to the server.</span></span> <span data-ttu-id="f4f29-184">下面的代码演示`HTTP GET`并`HTTP POST`版本的`SelectCategoryEnumPost`方法。</span><span class="sxs-lookup"><span data-stu-id="f4f29-184">The following code shows the `HTTP GET` and `HTTP POST` versions of the `SelectCategoryEnumPost` method.</span></span>

[!code-csharp[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample7.cs)]

<span data-ttu-id="f4f29-185">通过传递`eMovieCategories`到枚举`POST`方法中，我们可以提取类型的枚举值和枚举字符串。</span><span class="sxs-lookup"><span data-stu-id="f4f29-185">By passing a `eMovieCategories` enum to the `POST` method, we can extract both the enum value and the enum string.</span></span> <span data-ttu-id="f4f29-186">运行示例并导航到测试页。</span><span class="sxs-lookup"><span data-stu-id="f4f29-186">Run the sample and navigate to the Test page.</span></span> <span data-ttu-id="f4f29-187">单击`Select Movie Category(Enum Post)`链接。</span><span class="sxs-lookup"><span data-stu-id="f4f29-187">Click on the `Select Movie Category(Enum Post)` link.</span></span> <span data-ttu-id="f4f29-188">选择电影类型，然后点击提交按钮。</span><span class="sxs-lookup"><span data-stu-id="f4f29-188">Select a movie type and then hit the submit button.</span></span> <span data-ttu-id="f4f29-189">屏幕将显示的值和电影类型的名称。</span><span class="sxs-lookup"><span data-stu-id="f4f29-189">The display shows both the value and the name of the movie type.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image7.png)

### <a name="creating-a-multiple-section-select-element"></a><span data-ttu-id="f4f29-190">创建多个部分中选择元素</span><span class="sxs-lookup"><span data-stu-id="f4f29-190">Creating a Multiple Section Select Element</span></span>

<span data-ttu-id="f4f29-191">[ListBox](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.listbox.aspx)的 HTML 帮助器的 HTML 呈现`<select>`具有元素`multiple`属性，它允许用户选择多项。</span><span class="sxs-lookup"><span data-stu-id="f4f29-191">The [ListBox](https://msdn.microsoft.com/library/system.web.mvc.html.selectextensions.listbox.aspx) HTML helper renders the HTML `<select>` element with the `multiple` attribute, which allows the users to make multiple selections.</span></span> <span data-ttu-id="f4f29-192">导航到测试链接，然后选择**多选择国家/地区**链接。</span><span class="sxs-lookup"><span data-stu-id="f4f29-192">Navigate to the Test link, then select the **Multi Select Country** link.</span></span> <span data-ttu-id="f4f29-193">呈现的 UI，可选择多个国家/地区。</span><span class="sxs-lookup"><span data-stu-id="f4f29-193">The rendered UI allows you to select multiple countries.</span></span> <span data-ttu-id="f4f29-194">在下图中，选择加拿大和中国。</span><span class="sxs-lookup"><span data-stu-id="f4f29-194">In the image below, Canada and China are selected.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image8.png)

### <a name="examining-the-multiselectcountry-code"></a><span data-ttu-id="f4f29-195">检查 MultiSelectCountry 代码</span><span class="sxs-lookup"><span data-stu-id="f4f29-195">Examining the MultiSelectCountry Code</span></span>

<span data-ttu-id="f4f29-196">检查中的以下代码*Controllers\HomeController.cs*文件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-196">Examine the following code from the *Controllers\HomeController.cs* file.</span></span>

[!code-csharp[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample8.cs)]

<span data-ttu-id="f4f29-197">`GetCountries`方法创建一系列国家/地区，然后将其传递给`MultiSelectList`构造函数。</span><span class="sxs-lookup"><span data-stu-id="f4f29-197">The `GetCountries` method creates a list of countries, then passes it to the `MultiSelectList` constructor.</span></span> <span data-ttu-id="f4f29-198">`MultiSelectList`中使用的构造函数重载`GetCountries`上面方法采用四个参数：</span><span class="sxs-lookup"><span data-stu-id="f4f29-198">The `MultiSelectList` constructor overload used in the `GetCountries` method above takes four parameters:</span></span>

[!code-csharp[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample9.cs)]

1. <span data-ttu-id="f4f29-199">*项*: [IEnumerable](https://msdn.microsoft.com/library/system.collections.ienumerable.aspx)包含列表中的项。</span><span class="sxs-lookup"><span data-stu-id="f4f29-199">*items*: An [IEnumerable](https://msdn.microsoft.com/library/system.collections.ienumerable.aspx) containing the items in the list.</span></span> <span data-ttu-id="f4f29-200">在上面列表的国家/地区的示例。</span><span class="sxs-lookup"><span data-stu-id="f4f29-200">In the example above, the list of Countries.</span></span>
2. <span data-ttu-id="f4f29-201">*dataValueField*： 在属性的名称**IEnumerable**包含的值的列表。</span><span class="sxs-lookup"><span data-stu-id="f4f29-201">*dataValueField*: The name of the property in the **IEnumerable** list that contains the value.</span></span> <span data-ttu-id="f4f29-202">在上述示例中，`ID`属性。</span><span class="sxs-lookup"><span data-stu-id="f4f29-202">In the example above, the `ID` property.</span></span>
3. <span data-ttu-id="f4f29-203">*dataTextField*： 在属性的名称**IEnumerable**列表，其中包含要显示的信息。</span><span class="sxs-lookup"><span data-stu-id="f4f29-203">*dataTextField*: The name of the property in the **IEnumerable** list that contains the information to display.</span></span> <span data-ttu-id="f4f29-204">在上述示例中，`name`属性。</span><span class="sxs-lookup"><span data-stu-id="f4f29-204">In the example above, the `name` property.</span></span>
4. <span data-ttu-id="f4f29-205">*selectedValues*： 所选值的列表。</span><span class="sxs-lookup"><span data-stu-id="f4f29-205">*selectedValues*: The list of selected values.</span></span>

<span data-ttu-id="f4f29-206">在上述示例中，`MultiSelectCountry`方法传递`null`针对所选国家/地区，以便显示的用户界面时，不选中任何国家/地区的值。</span><span class="sxs-lookup"><span data-stu-id="f4f29-206">In the example above, the `MultiSelectCountry` method passes a `null` value for the selected countries, so no countries are selected when the UI is displayed.</span></span> <span data-ttu-id="f4f29-207">下面的代码显示了 Razor 标记用于呈现`MultiSelectCountry`视图。</span><span class="sxs-lookup"><span data-stu-id="f4f29-207">The following code shows the Razor markup used to render the `MultiSelectCountry` view.</span></span>

[!code-cshtml[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample10.cshtml)]

<span data-ttu-id="f4f29-208">HTML 帮助器[ListBox](https://msdn.microsoft.com/library/dd470200.aspx)采用上面两个参数，模型绑定的属性的名称使用的方法和[MultiSelectList](https://msdn.microsoft.com/library/system.web.mvc.multiselectlist.aspx)包含选择的选项和值。</span><span class="sxs-lookup"><span data-stu-id="f4f29-208">The HTML helper [ListBox](https://msdn.microsoft.com/library/dd470200.aspx) method used above take two parameters, the name of the property to model bind and the [MultiSelectList](https://msdn.microsoft.com/library/system.web.mvc.multiselectlist.aspx) containing the select options and values.</span></span> <span data-ttu-id="f4f29-209">`ViewBag.YouSelected`上面的代码用于显示您在提交表单时选择的国家/地区的值。</span><span class="sxs-lookup"><span data-stu-id="f4f29-209">The `ViewBag.YouSelected` code above is used to display the values of the countries you selected when you submit the form.</span></span> <span data-ttu-id="f4f29-210">检查的 HTTP POST 重载`MultiSelectCountry`方法。</span><span class="sxs-lookup"><span data-stu-id="f4f29-210">Examine the HTTP POST overload of the `MultiSelectCountry` method.</span></span>

[!code-csharp[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample11.cs)]

<span data-ttu-id="f4f29-211">`ViewBag.YouSelected`动态属性包含所选国家/地区，为获取`Countries`窗体集合中的条目。</span><span class="sxs-lookup"><span data-stu-id="f4f29-211">The `ViewBag.YouSelected` dynamic property contains the selected countries, obtained for the `Countries` entry in the form collection.</span></span> <span data-ttu-id="f4f29-212">在此版本 GetCountries 方法传递一系列所选国家/地区，因此，在`MultiSelectCountry`显示视图中，在 UI 中选择所选国家/地区。</span><span class="sxs-lookup"><span data-stu-id="f4f29-212">In this version the GetCountries method is passed a list of the selected countries, so when the `MultiSelectCountry` view is displayed, the selected countries are selected in the UI.</span></span>

### <a name="making-a-select-element-friendly-with-the-harvest-chosen-jquery-plugin"></a><span data-ttu-id="f4f29-213">进行选择元素友好 Harvest 所选择的 jquery 插件</span><span class="sxs-lookup"><span data-stu-id="f4f29-213">Making a Select Element Friendly with the Harvest Chosen jQuery Plugin</span></span>

<span data-ttu-id="f4f29-214">Harvest[所选](http://harvesthq.github.com/chosen/)jQuery 插件可以添加到对应的 HTML&lt;选择&gt;元素创建的用户友好 UI。</span><span class="sxs-lookup"><span data-stu-id="f4f29-214">The Harvest [Chosen](http://harvesthq.github.com/chosen/) jQuery plugin can be added to an HTML &lt;select&gt; element to create a user friendly UI.</span></span> <span data-ttu-id="f4f29-215">下图演示 Harvest[所选](http://harvesthq.github.com/chosen/)与 jQuery 插件`MultiSelectCountry`视图。</span><span class="sxs-lookup"><span data-stu-id="f4f29-215">The images below demonstrate the Harvest [Chosen](http://harvesthq.github.com/chosen/) jQuery plugin with `MultiSelectCountry` view.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image9.png)

<span data-ttu-id="f4f29-216">在下面的两个映像**加拿大**处于选中状态。</span><span class="sxs-lookup"><span data-stu-id="f4f29-216">In the two images below, **Canada** is selected.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image10.png)

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image11.png)

<span data-ttu-id="f4f29-217">在上图中，选择加拿大，并且它包含**x**可以单击要删除所选内容。</span><span class="sxs-lookup"><span data-stu-id="f4f29-217">In the image above, Canada is selected, and it contains an **x** you can click to remove the selection.</span></span> <span data-ttu-id="f4f29-218">下图显示了加拿大，中国区，并且日本选择。</span><span class="sxs-lookup"><span data-stu-id="f4f29-218">The image below shows Canada, China, and Japan selected.</span></span>

![](using-the-dropdownlist-helper-with-aspnet-mvc/_static/image12.png)

### <a name="hooking-up-the-harvest-chosen-jquery-plugin"></a><span data-ttu-id="f4f29-219">挂接 Harvest 所选择的 jQuery 插件</span><span class="sxs-lookup"><span data-stu-id="f4f29-219">Hooking up the Harvest Chosen jQuery Plugin</span></span>

<span data-ttu-id="f4f29-220">以下部分是更轻松地遵循如果您没有使用 jQuery 一些经验。</span><span class="sxs-lookup"><span data-stu-id="f4f29-220">The following section is easier to follow if you have some experience with jQuery.</span></span> <span data-ttu-id="f4f29-221">如果你从未使用过 jQuery 之前，你可能想要尝试以下 jQuery 教程之一。</span><span class="sxs-lookup"><span data-stu-id="f4f29-221">If you have never used jQuery before, you might want to try one of the following jQuery tutorials.</span></span>

- <span data-ttu-id="f4f29-222">[JQuery 的工作原理](http://docs.jquery.com/Tutorials:How_jQuery_Works)通过[John Resig](http://ejohn.org/)</span><span class="sxs-lookup"><span data-stu-id="f4f29-222">[How jQuery Works](http://docs.jquery.com/Tutorials:How_jQuery_Works) by [John Resig](http://ejohn.org/)</span></span>
- <span data-ttu-id="f4f29-223">[开始使用 jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)通过[Jörn Zaefferer](http://bassistance.de/)</span><span class="sxs-lookup"><span data-stu-id="f4f29-223">[Getting Started with jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery) by [Jörn Zaefferer](http://bassistance.de/)</span></span>
- <span data-ttu-id="f4f29-224">[Live jQuery 的示例](http://codylindley.com/blogstuff/js/jquery/#)通过[Cody Lindley](http://codylindley.com/)</span><span class="sxs-lookup"><span data-stu-id="f4f29-224">[Live Examples of jQuery](http://codylindley.com/blogstuff/js/jquery/#) by [Cody Lindley](http://codylindley.com/)</span></span>

<span data-ttu-id="f4f29-225">Starter 和已完成的示例项目附带本教程中包含所选择的插件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-225">The Chosen plugin is included in the starter and completed sample projects that accompany this tutorial.</span></span> <span data-ttu-id="f4f29-226">对于本教程只需要使用 jQuery 来将它挂接到 UI。</span><span class="sxs-lookup"><span data-stu-id="f4f29-226">For this tutorial you will only need to use jQuery to hook it up to the UI.</span></span> <span data-ttu-id="f4f29-227">若要在 ASP.NET MVC 项目中使用所选择的 Harvest jQuery 插件，您必须：</span><span class="sxs-lookup"><span data-stu-id="f4f29-227">To use the Harvest Chosen jQuery plugin in an ASP.NET MVC project, you must:</span></span>

1. <span data-ttu-id="f4f29-228">下载所选插件[github](https://github.com/harvesthq/chosen/)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-228">Download Chosen plugin from [github](https://github.com/harvesthq/chosen/).</span></span> <span data-ttu-id="f4f29-229">已为你完成此步骤。</span><span class="sxs-lookup"><span data-stu-id="f4f29-229">This step has been done for you.</span></span>
2. <span data-ttu-id="f4f29-230">将所选文件夹添加到 ASP.NET MVC 项目。</span><span class="sxs-lookup"><span data-stu-id="f4f29-230">Add the Chosen folder to your ASP.NET MVC project.</span></span> <span data-ttu-id="f4f29-231">添加从所选插件在所选文件夹为上一步中下载的资产。</span><span class="sxs-lookup"><span data-stu-id="f4f29-231">Add the assets from the Chosen plugin you downloaded in the previous step to the Chosen folder.</span></span> <span data-ttu-id="f4f29-232">已为你完成此步骤。</span><span class="sxs-lookup"><span data-stu-id="f4f29-232">This step has been done for you.</span></span>
3. <span data-ttu-id="f4f29-233">挂接到所选的插件**DropDownList**或**ListBox**的 HTML 帮助器。</span><span class="sxs-lookup"><span data-stu-id="f4f29-233">Hook up the chosen plugin to the **DropDownList** or **ListBox** HTML helper.</span></span>

### <a name="hooking-up-the-chosen-plugin-to-the-multiselectcountry-view"></a><span data-ttu-id="f4f29-234">挂接到 MultiSelectCountry 视图所选择的插件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-234">Hooking up the Chosen Plugin to the MultiSelectCountry View.</span></span>

<span data-ttu-id="f4f29-235">打开*Views\Home\MultiSelectCountry.cshtml*文件，并添加`htmlAttributes`参数`Html.ListBox`。</span><span class="sxs-lookup"><span data-stu-id="f4f29-235">Open the *Views\Home\MultiSelectCountry.cshtml* file and add an `htmlAttributes` parameter to the `Html.ListBox`.</span></span> <span data-ttu-id="f4f29-236">您将添加此参数包含选择列表的类名称 (`@class = "chzn-select"`)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-236">The parameter you will add contains a class name for the select list(`@class = "chzn-select"`).</span></span> <span data-ttu-id="f4f29-237">已完成的代码如下所示：</span><span class="sxs-lookup"><span data-stu-id="f4f29-237">The completed code is shown below:</span></span>

[!code-cshtml[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample12.cshtml)]

<span data-ttu-id="f4f29-238">在上面的代码中，我们要添加的 HTML 特性和特性值`class = "chzn-select"`。</span><span class="sxs-lookup"><span data-stu-id="f4f29-238">In the code above, we are adding the HTML attribute and attribute value `class = "chzn-select"`.</span></span> <span data-ttu-id="f4f29-239">@ 字符中前面的类具有与 Razor 视图引擎没有任何关系。</span><span class="sxs-lookup"><span data-stu-id="f4f29-239">The @ character preceding class has nothing to do with the Razor view engine.</span></span> <span data-ttu-id="f4f29-240">`class` 是[C# 关键字](https://msdn.microsoft.com/library/x53a06bb.aspx)。</span><span class="sxs-lookup"><span data-stu-id="f4f29-240">`class` is a [C# keyword](https://msdn.microsoft.com/library/x53a06bb.aspx).</span></span> <span data-ttu-id="f4f29-241">C# 关键字不能用作标识符，除非它们包含作为前缀。</span><span class="sxs-lookup"><span data-stu-id="f4f29-241">C# keywords cannot be used as identifiers unless they include @ as a prefix.</span></span> <span data-ttu-id="f4f29-242">在上述示例中，`@class`是有效的标识符，但**类**不是因为**类**是一个关键字。</span><span class="sxs-lookup"><span data-stu-id="f4f29-242">In the example above, `@class` is a valid identifier but **class** is not because **class** is a keyword.</span></span>

<span data-ttu-id="f4f29-243">将引用添加到*Chosen/chosen.jquery.js*并*Chosen/chosen.css*文件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-243">Add references to the *Chosen/chosen.jquery.js* and *Chosen/chosen.css* files.</span></span> <span data-ttu-id="f4f29-244">*Chosen/chosen.jquery.js*并实现所选择的插件的功能上。</span><span class="sxs-lookup"><span data-stu-id="f4f29-244">The *Chosen/chosen.jquery.js* and implements the functionally of the Chosen plugin.</span></span> <span data-ttu-id="f4f29-245">*Chosen/chosen.css*文件提供了样式。</span><span class="sxs-lookup"><span data-stu-id="f4f29-245">The *Chosen/chosen.css* file provides the styling.</span></span> <span data-ttu-id="f4f29-246">这些将引用添加到底部*Views\Home\MultiSelectCountry.cshtml*文件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-246">Add these references to the bottom of the *Views\Home\MultiSelectCountry.cshtml* file.</span></span> <span data-ttu-id="f4f29-247">下面的代码演示如何引用所选择的插件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-247">The following code shows how to reference the Chosen plugin.</span></span>

[!code-cshtml[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample13.cshtml)]

<span data-ttu-id="f4f29-248">激活使用类名称中使用所选择的插件**Html.ListBox**代码。</span><span class="sxs-lookup"><span data-stu-id="f4f29-248">Activate the Chosen plugin using the class name used in the **Html.ListBox** code.</span></span> <span data-ttu-id="f4f29-249">在上面的示例中，类名是`chzn-select`。</span><span class="sxs-lookup"><span data-stu-id="f4f29-249">In the example above, the class name is `chzn-select`.</span></span> <span data-ttu-id="f4f29-250">将以下行添加到底部*Views\Home\MultiSelectCountry.cshtml*视图文件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-250">Add the following line to the bottom of the *Views\Home\MultiSelectCountry.cshtml* view file.</span></span> <span data-ttu-id="f4f29-251">此代码行激活所选择的插件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-251">This line activates the Chosen plugin.</span></span>

[!code-html[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample14.html)]

<span data-ttu-id="f4f29-252">下面的行是调用了 jQuery ready 函数，后者将选择具有类名称的 DOM 元素的语法`chzn-select`。</span><span class="sxs-lookup"><span data-stu-id="f4f29-252">The following line is the syntax to call the jQuery ready function, which selects the DOM element with class name `chzn-select`.</span></span>

[!code-powershell[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample15.ps1)]

<span data-ttu-id="f4f29-253">所选的方法的应用设置，则返回从上述调用包装 (`.chosen();`)，它与所选择的插件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-253">The wrapped set returned from the above call then applies the chosen method (`.chosen();`), which hooks up the Chosen plugin.</span></span>

<span data-ttu-id="f4f29-254">下面的代码演示了已完成*Views\Home\MultiSelectCountry.cshtml*视图文件。</span><span class="sxs-lookup"><span data-stu-id="f4f29-254">The following code shows the completed *Views\Home\MultiSelectCountry.cshtml* view file.</span></span>

[!code-cshtml[Main](using-the-dropdownlist-helper-with-aspnet-mvc/samples/sample16.cshtml)]

<span data-ttu-id="f4f29-255">运行应用程序并导航到`MultiSelectCountry`视图。</span><span class="sxs-lookup"><span data-stu-id="f4f29-255">Run the application and navigate to the `MultiSelectCountry` view.</span></span> <span data-ttu-id="f4f29-256">尝试添加和删除国家/地区。</span><span class="sxs-lookup"><span data-stu-id="f4f29-256">Try adding and deleting countries.</span></span> <span data-ttu-id="f4f29-257">提供的示例下载还包含`MultiCountryVM`方法，并实现 MultiSelectCountry 功能使用视图的视图模型而不是**ViewBag**。</span><span class="sxs-lookup"><span data-stu-id="f4f29-257">The sample download provided also contains a `MultiCountryVM` method and view that implements the MultiSelectCountry functionality using a view model instead of a **ViewBag**.</span></span>

<span data-ttu-id="f4f29-258">下一节中您将看到与 ASP.NET MVC 基架机制工作原理**DropDownList**帮助器。</span><span class="sxs-lookup"><span data-stu-id="f4f29-258">In the next section you'll see how the ASP.NET MVC scaffolding mechanism works with the **DropDownList** helper.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="f4f29-259">下一篇</span><span class="sxs-lookup"><span data-stu-id="f4f29-259">Next</span></span>](examining-how-aspnet-mvc-scaffolds-the-dropdownlist-helper.md)
