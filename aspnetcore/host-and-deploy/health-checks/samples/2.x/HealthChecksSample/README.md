# <a name="aspnet-core-health-check-sample"></a><span data-ttu-id="313a4-101">ASP.NET Core 运行状况检查示例</span><span class="sxs-lookup"><span data-stu-id="313a4-101">ASP.NET Core Health Check Sample</span></span>

<span data-ttu-id="313a4-102">此示例演示如何使用运行状况检查中间件和服务。</span><span class="sxs-lookup"><span data-stu-id="313a4-102">This sample illustrates the use of Health Check Middleware and services.</span></span> <span data-ttu-id="313a4-103">此示例演示 [ASP.NET Core 中的运行状况检查](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks)主题中所述的方案。</span><span class="sxs-lookup"><span data-stu-id="313a4-103">This sample demonstrates the scenario described in the [Health checks in ASP.NET Core](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic.</span></span>

<span data-ttu-id="313a4-104">若要运行主题中所述方案的示例应用，请在命令行界面中从项目文件夹中使用 [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) 命令。</span><span class="sxs-lookup"><span data-stu-id="313a4-104">To run the sample app for a scenario described in the topic, use the [dotnet run](https://docs.microsoft.com/dotnet/core/tools/dotnet-run) command from the project's folder in a command shell.</span></span> <span data-ttu-id="313a4-105">针对所浏览的方案传递开关。</span><span class="sxs-lookup"><span data-stu-id="313a4-105">Pass a switch for the scenario that you're exploring.</span></span> <span data-ttu-id="313a4-106">未向 `dotnet run` 提供开关时，应用默认为 `basic` 配置。</span><span class="sxs-lookup"><span data-stu-id="313a4-106">The app defaults to the `basic` configuration when a switch isn't provided to `dotnet run`.</span></span>

| <span data-ttu-id="313a4-107">方案</span><span class="sxs-lookup"><span data-stu-id="313a4-107">Scenario</span></span>                                               | <span data-ttu-id="313a4-108">示例应用命令</span><span class="sxs-lookup"><span data-stu-id="313a4-108">Sample app command</span></span>               | <span data-ttu-id="313a4-109">说明</span><span class="sxs-lookup"><span data-stu-id="313a4-109">Description</span></span> |
| ------------------------------------------------------ | -------------------------------- | ----------- |
| <span data-ttu-id="313a4-110">基本运行状况探测（默认）</span><span class="sxs-lookup"><span data-stu-id="313a4-110">Basic health probe (default)</span></span>                           | `dotnet run --scenario basic`    | <span data-ttu-id="313a4-111">确认应用可以处理 HTTP 请求。</span><span class="sxs-lookup"><span data-stu-id="313a4-111">Confirms that the app can process HTTP requests.</span></span> |
| <span data-ttu-id="313a4-112">数据库探测</span><span class="sxs-lookup"><span data-stu-id="313a4-112">Database probe</span></span>                                         | `dotnet run --scenario db`       | <span data-ttu-id="313a4-113">检查 SQL Server 数据库连接。</span><span class="sxs-lookup"><span data-stu-id="313a4-113">Checks a SQL Server database connection.</span></span> <span data-ttu-id="313a4-114">有关说明，请参阅主题的[数据库探测](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe)部分。</span><span class="sxs-lookup"><span data-stu-id="313a4-114">See the [Database probe](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#database-probe) section of the topic for instructions.</span></span> |
| <span data-ttu-id="313a4-115">就绪情况/运行情况探测</span><span class="sxs-lookup"><span data-stu-id="313a4-115">Readiness/liveness probes</span></span>                              | `dotnet run --scenario liveness` | <span data-ttu-id="313a4-116">针对动态应用状态（运行情况）与正在准备成为动态状态的应用（就绪情况）执行检查。</span><span class="sxs-lookup"><span data-stu-id="313a4-116">Performs checks for a live app status (*liveness*) versus the app preparing to become live (*readiness*).</span></span> |
| <span data-ttu-id="313a4-117">基于指标的探测（内存）/</span><span class="sxs-lookup"><span data-stu-id="313a4-117">Metric-based probe (memory)/</span></span><br><span data-ttu-id="313a4-118">自定义响应编写器</span><span class="sxs-lookup"><span data-stu-id="313a4-118">custom response writer</span></span> | `dotnet run --scenario writer`   | <span data-ttu-id="313a4-119">对内存使用情况进行检查，并在检查运行状况终结点时写出自定义 JSON。</span><span class="sxs-lookup"><span data-stu-id="313a4-119">Checks against memory use and writes out custom JSON when the health endpoint is checked.</span></span> |
| <span data-ttu-id="313a4-120">按端口筛选</span><span class="sxs-lookup"><span data-stu-id="313a4-120">Filter by port</span></span>                                         | `dotnet run --scenario port`     | <span data-ttu-id="313a4-121">将运行状况检查筛选到给定端口。</span><span class="sxs-lookup"><span data-stu-id="313a4-121">Filters health checks to a given port.</span></span> <span data-ttu-id="313a4-122">有关说明，请参阅主题的[按端口筛选](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port)部分。</span><span class="sxs-lookup"><span data-stu-id="313a4-122">See the [Filter by port](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks#filter-by-port) section of the topic for instructions.</span></span> |

<span data-ttu-id="313a4-123">数据库探测和端口筛选器方案需要进行其他配置。</span><span class="sxs-lookup"><span data-stu-id="313a4-123">The database probe and port filter scenarios require additional configuration.</span></span> <span data-ttu-id="313a4-124">有关详细信息，请参阅[运行状况检查](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks)主题。</span><span class="sxs-lookup"><span data-stu-id="313a4-124">See the [Health checks](https://docs.microsoft.com/aspnet/core/host-and-deploy/health-checks) topic for details.</span></span>
